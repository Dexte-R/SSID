<%
=begin
This file is part of SSID.

SSID is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

SSID is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with SSID.  If not, see <http://www.gnu.org/licenses/>.
=end
%>

<h2>My Modules</h2>
<br/>

<% if @courses.size == 0 %>
  No module is available.
<% else %>
  <table class="listing">
    <col width="1*"/>
    <col width="3*"/>
    <col width="1*"/>
    <col width="1*"/>
    <col width="1*"/>
    <col width="1*"/>
    <col width="1*"/>
    <col width="1*"/>
    <thead class="listing">
      <tr class="listing">
        <th class="listing">Code</th>
        <th class="listing">Name</th>
        <th class="listing">Academic Year</th>
        <th class="listing">Semester</th>
        <th class="listing">Role</th>
        <th class="listing">Assignments</th>
        <th class="listing">Details</th>
        <th class="listing">Visuals</th>
      </tr>
    </thead>
    <tbody class="listing">
      <%
      for course in @courses
        teaching = @user_account.teachings.find(:all, :conditions => "course_id = " + course.id.to_s).first
        if (teaching)
          role = get_role(teaching.role)
        %>
          <tr class="listing" onmouseover="this.style.backgroundColor ='<%=highlightColor_row%>';" onmouseout="this.style.backgroundColor ='white';">
            <td class="listing" onmouseover="Tip('Click to view assignments');" onmouseout="UnTip();" onclick="document.location = 'assignment_listing?course_id=<%=course.id%>';"><%=course.code%></td>
            <td class="listing" onmouseover="Tip('Click to view assignments');" onmouseout="UnTip();" onclick="document.location = 'assignment_listing?course_id=<%=course.id%>';"><%= course.name %></td>
            <td class="listing" onmouseover="Tip('Click to view assignments');" onmouseout="UnTip();" onclick="document.location = 'assignment_listing?course_id=<%=course.id%>';"><%= course.academic_year %></td>
            <td class="listing" onmouseover="Tip('Click to view assignments');" onmouseout="UnTip();" onclick="document.location = 'assignment_listing?course_id=<%=course.id%>';"><%= course.semester %></td>
            <td class="listing" onmouseover="Tip('Click to view assignments');" onmouseout="UnTip();" onclick="document.location = 'assignment_listing?course_id=<%=course.id%>';"><%= role %></td>
            <td class="listing" onmouseover="Tip('Click to view assignments');" onmouseout="UnTip();" onclick="document.location = 'assignment_listing?course_id=<%=course.id%>';"><%= course.assignments.size %></td>
            <td class="listing" style="text-decoration: underline;" onmouseover="Tip('Click to view course details'); this.style.color='<%=highlightColor_link%>';" onmouseout="UnTip(); this.style.color='#333';" onclick="document.location = 'course_view?course_id=<%=course.id%>';">View</td>
            <% if course.clusters > 0 %>
              <td class="listing" style="text-decoration: underline;" onmouseover="Tip('Click to view visuals'); this.style.color='<%=highlightColor_link%>';" onmouseout="UnTip(); this.style.color='#333';" onclick="document.location = 'graph_view_assignments?course_id=<%=course.id%>';">View</td>
            <% else %>
              <td class="listing" style="cursor: default; color: gray;" onmouseover="Tip('No plagiarism cluster detected');" onmouseout="UnTip();" >View</td>
            <% end %>
          </tr>
        <%
        end
      end
    %>
    </tbody>
  </table>
  <p/><div class="instruction">Click the module to view assignments</div>
<%  end %>