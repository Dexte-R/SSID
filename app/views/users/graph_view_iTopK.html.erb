<%
=begin
This file is part of SSID.

SSID is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

SSID is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with SSID.  If not, see <http://www.gnu.org/licenses/>.
=end
%>

<script type="text/javascript">

  function isNum(text) {
    var validChars = "0123456789";

    for (i = 0; i < text.length; i++) {
      if (validChars.indexOf(text.charAt(i)) == -1)
        return false;
    }

    return true;
  }

  function validate() {
    var selectBox = document.getElementById('sltTop');

    if (selectBox.selectedIndex < 0) {
      alert('Please select at least one student');
      return false;
    }

    var txtK = document.getElementById('k').value;
    if (!(txtK.length > 0 && isNum(txtK))) {
      alert('K must be a positive integer');
      return false;
    }

    return true;
  }
</script>
<h3 style="display:inline">This visual provides the top K similar submissions to selected student</h3>
<p/>
To start, select the student from <b>Available Students</b>, enter the desired <b>K</b> value, and click <b>Show Visual</b>
<p/>
<form id="frmTop" action="graph_top">
  <table cellpadding="0" cellspacing="0" style="width:auto;">
    <tr valign="top">
      <td colspan="2">
        <div style="margin-bottom: 3px; font-weight:bold;">Available Students</div>
      </td>
    </tr>
    <tr>
      <td>
        <select name="programmer" id="sltTop" size="10" style="margin-left: 0px;height:200px;width:200px;">
          <% @allCoders.each { |coder| %>
            <option value="<%=coder%>"><%=coder%>&nbsp;&nbsp;</option>
          <% } %>
        </select><p/>

      </td>
      <td valign="top">
        <span style="width:60px; margin-bottom:10px;">Search : </span><input type="text" id="txtfilter" onkeyup="filter('sltTop', 'txtfilter');" style="width:148px; margin-bottom: 10px;"/><br />
      </td>
    </tr>
  </table>
  <p/>
  <input type="hidden" name="courseId" value="<%=@course.id%>"/>
  <span style="font-weight:bold;">K <%= genHelp("Default: 5")  %>  = <input name="k" id="k" value="5" type="text" style="width:171px;"/></span>
  <hr/>
  <input type="submit" value="Show Visual" onclick="if (!validate()) { return false;}" onmouseover="Tip('The visual will be displayed in a new window');" onmouseout="UnTip();" />
  <p/>
  <div class="instruction" style="text-align: left;">Note: The visual will be displayed in a new window</div>
</form>
