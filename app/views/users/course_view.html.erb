<%
=begin
This file is part of SSID.

SSID is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

SSID is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with SSID.  If not, see <http://www.gnu.org/licenses/>.
=end
%>

<div class="breadcrumb"><%= link_to "My Modules", {:action => "course_listing"}, :class => "breadcrumbItem" %> > <%= link_to @course.code, {:action => "assignment_listing", :course_id => @course.id}, :class => "breadcrumbItem" %></div>
<h2>Module details</h2>
<table cellpadding="0" cellspacing="0">
  <tr>
    <td nowrap><b>Academic Year: </b><%= @course.academic_year %></td>
    <td nowrap><b>Semester: </b><%= @course.semester %></td>
    <td nowrap><b>Expiry: </b><%= format_datetime(@course.expiry) %></td>
  </tr>
</table>
<hr />
<h2>Associated Accounts</h2>
<table cellpadding="0" cellspacing="0" class="listing">
  <thead class="listing">
    <tr class="listing">
      <th class="listing">ID</th>
      <th class="listing">Matric</th>
      <th class="listing">Name</th>
      <th class="listing">Role</th>
    </tr>
  </thead>

  <tbody class="listing">
    <% for account in @course.accounts %>
      <tr class="listing">
        <td class="listing" style="cursor: default;"><%=  account.login %></td>
        <td class="listing" style="cursor: default;"><%=  account.matric %></td>
        <td class="listing" style="cursor: default;"><%=  account.name %></td>
        <td class="listing" style="cursor: default;">
          <%=get_role(account.teachings.find(:first, :conditions => "course_id = #{@course.id}").role) %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<hr />
<%= link_to 'Assignments Listing', {:action => "assignment_listing", :course_id =>@course.id}, :class => "normalLink" %>

