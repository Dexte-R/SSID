<%
=begin
This file is part of SSID.

SSID is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

SSID is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with SSID.  If not, see <http://www.gnu.org/licenses/>.
=end
%>

<table cellspacing="3">
  <tr>
    <td><b>Code: </b><%= @module.code %></td>
    <td><b>Name: </b><%= @module.name %></td>
  </tr>
  <tr>
    <td><b>Academic Year: </b><%= @module.academic_year %></td>
    <td><b>Semester: </b><%= @module.semester %></td>
  </tr>
  <tr>
    <td colspan="2"><b>Expiry: </b><%= format_datetime(@module.expiry) %></td>
  </tr>
</table>
<% if @module.teachings.size > 0 %>
  <h2>Account Associated</h2>
  <table border="1">
    <tr>
      <th>ID</th>
      <th>Matric</th>
      <th>Name</th>
      <th>Role</th>
    </tr>
    <%
    for teaching in @module.teachings
      account = teaching.account
    %>
      <tr>
        <td><%= account.login %></td>
        <td align="center"><%= account.matric %></td>
        <td><%= account.name %></td>
        <td align="center">
          <%
          teaching = account.teachings.find(:all, :conditions => [ "course_id = #{@module.id.to_s}"])
          if (teaching.size == 1)
            role = teaching.first.role
          else
            role = 1
          end
        %>
          <%= get_role(role) %>
        </td>
      </tr>
    <% end %>
  </table>
<% end %>
<p>
  <%= link_to 'Edit', :action => 'module_edit', :id => @module %> |
  <%= link_to 'Back', :action => 'module_index' %>
</p>