<%
=begin
This file is part of SSID.

SSID is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

SSID is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with SSID.  If not, see <http://www.gnu.org/licenses/>.
=end
%>

<h1>New Account</h1>

<% form_for(@account, :url => { :action => 'account_create' }) do |f| %>
  <%= f.error_messages %>
<table cellspacing="2">
  <tr>
    <td>
      <%= f.label :name %><br />
      <%= f.text_field :name %>
    </td>
    <td>
      <%= f.label :matric %><br />
      <%= f.text_field :matric %>
    </td>
  </tr>
  <tr>
    <td>
      <%= f.label 'ID' %><br />
      <%= f.text_field :login %>
    </td>
    <td>
      <%= f.label :expiry %><br />
    <%
    if (Time.now.month > 6)
      default_month = '12'
      default_day = '31'
    else
      default_month = '6'
      default_day = '30'
    end
    default_year = Time.now.year.to_s
    default_hour = '23'
    default_minute = '59'
    default_second = '59'

    default_expiry = default_day + '-' + default_month + '-' + default_year + ' ' + default_hour + ':' + default_minute + ':' + default_second
    default_expiry = Time.parse(default_expiry)
    %>
    <%  #:prompt is not fixed till rails version 2.3 RC1 %>
    <%= f.datetime_select(
      :expiry,
      :default => default_expiry,
      :include_seconds => true,
      :order => [:day, :month, :year],
      :start_year => Time.now.year,
      :end_year => Time.now.year + 10)
    %>
    </td>
  </tr>
  <tr>
    <td>
      <%= f.label :password %><br />
      <%= f.text_field :password %>
    </td>
    <td>
      <%= f.label :password_confirmation %><br />
      <%= f.text_field :password_confirmation %>
    </td>
  </tr>
  <tr>
    <td>
      <%=getDefination("min_length")%><%=genHelp("#{getExplaination("min_length")}. Default: 2.")%><br/>
      <%= f.text_field 'min_length' %>
    </td>
    <td>
      <%=getDefination("ngram")%><%=genHelp("#{getExplaination("ngram")}. Default: 4.")%><br/>
      <%= f.text_field 'ngram' %>
    </td>
  </tr>
  <tr>
    <td colspan="2">
      <%= f.label :role %><br />
      <%= f.select(:role, [ ['Administrator', 0], ['User', 1] ], :default => '1') %>
    </td>
  </tr>
</table>
  <p>
    <%= f.submit 'Create' %>
  </p>
<% end %>

<%= link_to 'Back', :action => 'account_index' %>